(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9617)}])},9617:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var a=t(7876),n=t(4232),i=t(9891),l=t(4664),r=t(4287),c=t(3727),o=t(6856);t(863);let d=()=>(0,a.jsx)("svg",{className:"nav-icon w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),u=()=>(0,a.jsx)("svg",{className:"nav-icon w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),m=()=>(0,a.jsx)("svg",{className:"nav-icon w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"})}),h=()=>(0,a.jsx)("svg",{className:"nav-icon w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),p=()=>(0,a.jsx)("svg",{className:"nav-icon w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.24 7.76a5.52 5.52 0 00-8.48-3.36A4.5 4.5 0 006 7.5c0 .39-.03.77-.08 1.14A5.5 5.5 0 005.5 12a5.5 5.5 0 0010.41 2.66A4.5 4.5 0 0019.5 12a4.5 4.5 0 00-1.76-3.74z"})}),x=()=>(0,a.jsxs)("svg",{className:"nav-icon w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),g=()=>(0,a.jsx)("svg",{className:"nav-icon w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),j=()=>(0,a.jsx)("svg",{className:"nav-icon w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),b=()=>(0,a.jsx)("svg",{className:"sidebar-icon-svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),v=()=>(0,a.jsx)("svg",{className:"sidebar-icon-svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),y=()=>(0,a.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),f=()=>(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),N=()=>(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),w=()=>(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),k=()=>(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),S=()=>(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),C=()=>(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),_=()=>(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 15.546c-.523 0-1.046.151-1.5.454a2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.701 2.701 0 010 3.592 2.704 2.704 0 003 0 2.704 2.704 0 013 0 2.704 2.704 0 003 0 2.704 2.704 0 013 0 2.704 2.704 0 003 0 .986.986 0 00.5-.146A2.693 2.693 0 0021 15.546zM12 3v6m-6-3h12"})}),D=()=>(0,a.jsx)("svg",{className:"sidebar-icon-svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),T=()=>(0,a.jsx)("svg",{className:"sidebar-icon-svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),P=e=>{let s=(0,a.jsx)("svg",{className:"proficiency-star",fill:"currentColor",viewBox:"0 0 20 20",width:"16",height:"16",children:(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),t=(0,a.jsx)("svg",{className:"proficiency-award",fill:"currentColor",viewBox:"0 0 20 20",width:"20",height:"20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});switch(e){case"Novice":default:return(0,a.jsx)("div",{className:"proficiency-icons",children:s});case"Competent":return(0,a.jsxs)("div",{className:"proficiency-icons",children:[s,s,s]});case"Expert":return(0,a.jsxs)("div",{className:"proficiency-icons",children:[s,s,s,s,s]});case"Master":return(0,a.jsx)("div",{className:"proficiency-icons",children:t})}},L=()=>(0,a.jsx)("svg",{className:"sidebar-icon-svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),M=e=>{let s={};return e.forEach(e=>{let t="".concat(e.chapter_id,"-").concat(e.chapter_name);s[t]||(s[t]={chapter_id:e.chapter_id,chapter_name:e.chapter_name,subject:e.subject,curriculum:e.curriculum,grade:e.grade,studyPlans:[],aggregatedStatus:"In Queue",totalTopics:0,completedTopics:0,inProgressTopics:0,averageProgress:0}),s[t].studyPlans.push(e),s[t].totalTopics++}),Object.values(s).forEach(e=>{let s=e.studyPlans,t={Done:s.filter(e=>"Done"===e.learning_status).length,"In Progress":s.filter(e=>"In Progress"===e.learning_status).length,"To Do":s.filter(e=>"To Do"===e.learning_status).length,"In Queue":s.filter(e=>"In Queue"===e.learning_status).length};e.completedTopics=t.Done,e.inProgressTopics=t["In Progress"],e.averageProgress=Math.round(s.reduce((e,s)=>e+(s.progress_percentage||0),0)/s.length),t["In Progress"]>0?e.aggregatedStatus="In Progress":t["To Do"]>0?e.aggregatedStatus="To Do":t.Done===e.totalTopics?e.aggregatedStatus="Done":e.aggregatedStatus="In Queue"}),Object.values(s)};function I(e){let{chapter:s,bucketColor:t,onEdit:n,onUpdateProgress:i,getStatusColor:r,getProficiencyColor:o,isSelected:d,onToggleSelect:u}=e,{attributes:m,listeners:h,setNodeRef:p,transform:x,transition:g,isDragging:j}=(0,l.PM)({id:"chapter-".concat(s.chapter_id)}),b=(()=>{if(!s.studyPlans||0===s.studyPlans.length)return"Novice";let e={Master:4,Expert:3,Competent:2,Novice:1},t=s.studyPlans.reduce((s,t)=>Math.max(s,e[t.learning_proficiency]||1),1),a=Object.entries(e).find(e=>{let[s,a]=e;return a===t});return a?a[0]:"Novice"})(),v={transform:c.Ks.Translate.toString(x),transition:j?"none":"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:j?1e3:"auto"},y=Math.round(s.completedTopics/s.totalTopics*100),f=s.studyPlans.map(e=>e.target_date).filter(e=>e).map(e=>new Date(e)).sort((e,s)=>e-s),N=f.length>0?f[0]:null,w=N?Math.ceil((N-new Date)/864e5):null;return(0,a.jsxs)("div",{ref:p,style:{...v,border:d?"2px solid #8b5cf6":"none",backgroundColor:d?"rgba(139, 92, 246, 0.1)":"rgba(255, 255, 255, 0.3)",boxShadow:d?"inset 0 2px 4px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(139, 92, 246, 0.3)":"inset 0 2px 4px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0, 0, 0, 0.1)"},className:"chapter-card ".concat(j?"dragging":""," ").concat("In Queue"===s.aggregatedStatus?"backlog-card":""),onClick:e=>n(s,e),children:[(0,a.jsx)("div",{className:"chapter-checkbox",style:{position:"absolute",top:"8px",right:"8px",zIndex:10},children:(0,a.jsx)("input",{type:"checkbox",checked:d||!1,onChange:e=>{e.stopPropagation(),u&&u(s.chapter_id)},style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"#8b5cf6"}})}),(0,a.jsxs)("div",{className:"chapter-meta-top",children:[(0,a.jsx)("span",{className:"meta-id",children:s.chapter_id}),(0,a.jsx)("span",{className:"meta-subject",children:s.subject}),(0,a.jsx)("div",{style:{display:"flex",gap:"4px",alignItems:"center",marginLeft:"auto"},children:P(b)})]}),(0,a.jsx)("div",{className:"chapter-header",...m,...h,style:{cursor:j?"grabbing":"grab",background:"In Queue"===s.aggregatedStatus?"#f3f4f6":"linear-gradient(135deg, ".concat(r(s.aggregatedStatus),"20, ").concat(r(s.aggregatedStatus),"60)")},children:(0,a.jsx)("div",{className:"chapter-info",children:(0,a.jsx)("h4",{className:"chapter-title",onClick:e=>{e.stopPropagation()},children:s.chapter_name})})}),(0,a.jsxs)("div",{className:"chapter-content",children:[(0,a.jsx)("div",{className:"chapter-details-grid ".concat("In Queue"===s.aggregatedStatus?"backlog-grid":""),children:"In Queue"===s.aggregatedStatus?(0,a.jsxs)("div",{className:"detail-row",children:[(0,a.jsx)("span",{className:"detail-label",children:"Status:"}),(0,a.jsx)("span",{className:"status-badge",style:{color:r(s.aggregatedStatus)},children:s.aggregatedStatus}),N&&(0,a.jsx)("span",{className:"target-date-display ".concat(null!==w&&w<0?"overdue":null!==w&&w<=7?"urgent":""),children:null!==w?w<0?"⏰ ".concat(Math.abs(w)," days overdue"):"\uD83D\uDCC5 ".concat(w," days left"):"\uD83D\uDCC5 ".concat(new Date(N).toLocaleDateString())})]}):(0,a.jsxs)("div",{className:"detail-row",children:[(0,a.jsx)("span",{className:"detail-label",children:"Status:"}),(0,a.jsx)("span",{className:"status-badge",style:{color:r(s.aggregatedStatus)},children:s.aggregatedStatus})]})}),"In Queue"!==s.aggregatedStatus&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"chapter-stats-grid",children:[(0,a.jsxs)("div",{className:"stat-item",children:[(0,a.jsx)("span",{className:"stat-label",children:"Topics:"}),(0,a.jsx)("span",{className:"stat-value",children:s.totalTopics})]}),(0,a.jsxs)("div",{className:"stat-item",children:[(0,a.jsx)("span",{className:"stat-label",children:"Completed:"}),(0,a.jsx)("span",{className:"stat-value",children:s.completedTopics})]})]}),(0,a.jsxs)("div",{className:"chapter-progress",children:[(0,a.jsx)("div",{className:"progress-bar",children:(0,a.jsx)("div",{className:"progress-fill",style:{width:"".concat(y,"%"),backgroundColor:100===y?"#10b981":y>0?"#f59e0b":"#6b7280"}})}),(0,a.jsxs)("div",{className:"progress-info",children:[(0,a.jsx)("span",{className:"progress-label",children:"Progress"}),(0,a.jsxs)("span",{className:"progress-text",children:[y,"% Complete"]})]})]})]}),N&&"In Queue"!==s.aggregatedStatus&&(0,a.jsx)("div",{className:"chapter-target-date",children:(0,a.jsx)("span",{className:"target-date-display ".concat(null!==w&&w<0?"overdue":null!==w&&w<=7?"urgent":""),children:null!==w?w<0?"⏰ ".concat(Math.abs(w)," days overdue"):"\uD83D\uDCC5 ".concat(w," days left"):"\uD83D\uDCC5 ".concat(new Date(N).toLocaleDateString())})})]})]})}function E(e){let{bucket:s,chapters:t,onEditChapter:n,onUpdateProgress:i,getStatusColor:r,getProficiencyColor:c,selectedChapters:o,onToggleChapterSelect:d}=e,{setNodeRef:u,isOver:m}=(0,l.zM)({id:s.id}),h=t.filter(e=>(e.aggregatedStatus||"In Queue")===s.status);return(0,a.jsxs)("div",{ref:u,className:"bucket bg-gray-50 rounded-lg p-4 min-h-[500px] flex flex-col ".concat(m?"ring-2 ring-blue-500 bg-blue-50":""," ").concat((e=>{switch(e){case"Done":return"bucket-done";case"In Progress":return"bucket-in-progress";case"To Do":return"bucket-todo";case"In Queue":return"bucket-backlog";default:return""}})(s.status)),children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[s.name," (",h.length,")"]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"space-y-3",children:[h.map(e=>(0,a.jsx)(I,{chapter:e,bucketColor:r(s.status),onEdit:n,onUpdateProgress:i,getStatusColor:r,getProficiencyColor:c,isSelected:o.has(e.chapter_id),onToggleSelect:d},e.chapter_id)),0===h.length&&(0,a.jsxs)("div",{className:"flex items-center justify-center h-32 text-gray-500 text-sm border-2 border-dashed border-gray-300 rounded-lg",children:["No chapters in ",s.name.toLowerCase()]})]})})]})}function z(e){let{subject:s,onUpdate:t,getStatusColor:i,getProficiencyColor:l}=e,[r,c]=(0,n.useState)([]),[o,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(""),[h,p]=(0,n.useState)(!0),x=[{key:"actions",label:"Actions",width:"120px",type:"actions",readonly:!0},{key:"unique_id",label:"Unique ID",width:"140px",type:"text",readonly:!0},{key:"curriculum",label:"Curriculum",width:"100px",type:"text"},{key:"grade",label:"Grade",width:"70px",type:"number"},{key:"subject",label:"Subject",width:"100px",type:"text"},{key:"chapter_id",label:"Chapter ID",width:"100px",type:"text"},{key:"chapter_name",label:"Chapter Name",width:"180px",type:"text"},{key:"topic_id",label:"Topic ID",width:"100px",type:"text"},{key:"topic",label:"Topic",width:"250px",type:"text"},{key:"target_date",label:"Target Date",width:"120px",type:"date"},{key:"learning_status",label:"Learning Status",width:"130px",type:"select",options:["In Queue","To Do","In Progress","Done","Closed"]},{key:"learning_stage",label:"Learning Stage",width:"130px",type:"select",options:["Initiated","Skimmed","Grasped","Practiced","Revised"]},{key:"learning_proficiency",label:"Proficiency",width:"110px",type:"select",options:["Novice","Competent","Expert","Master"]},{key:"progress_percentage",label:"Progress %",width:"100px",type:"number",min:0,max:100},{key:"notes",label:"Notes",width:"200px",type:"text"}];(0,n.useEffect)(()=>{g()},[s]);let g=async()=>{try{p(!0);let e=s?r.filter(e=>e.subject.toLowerCase()===s.name.toLowerCase()):r;c(e)}catch(e){console.error("Failed to fetch study plans:",e)}finally{p(!1)}},j=(e,s,t)=>{d({uniqueId:e,columnKey:s}),m(t||"")},b=async()=>{if(o){try{let e=x.find(e=>e.key===o.columnKey),s=u;"number"===e.type?s=parseInt(u)||0:"date"===e.type&&(s=u?new Date(u).toISOString():null),o.columnKey;let a=r.map(e=>e.unique_id===o.uniqueId?{...e,[o.columnKey]:s}:e);c(a),localStorage.setItem("study-plans-data",JSON.stringify(a)),t&&t()}catch(e){console.error("Failed to update study plan:",e)}d(null),m("")}},v=e=>{"Enter"===e.key?b():"Escape"===e.key&&(d(null),m(""))},y=async()=>{try{let e={curriculum:(null==s?void 0:s.name)||"JEE",grade:11,subject:(null==s?void 0:s.name)||"Mathematics",chapter_name:"New Chapter",topic:"New Topic",target_date:null,learning_status:"In Queue",learning_stage:"Initiated",learning_proficiency:"Novice",progress_percentage:0,notes:""},a=[...r,{...e,unique_id:"NEW-".concat(Date.now())}];c(a),localStorage.setItem("study-plans-data",JSON.stringify(a)),t&&t()}catch(e){console.error("Failed to add row:",e)}},f=async e=>{if(!confirm("Are you sure you want to delete this row?"))return;let s=r.filter(s=>s.unique_id!==e);c(s),localStorage.setItem("study-plans-data",JSON.stringify(s)),t&&t()},N=async e=>{try{let a={...{curriculum:(null==s?void 0:s.name)||"JEE",grade:11,subject:(null==s?void 0:s.name)||"Mathematics",chapter_id:"CH-".concat(Date.now()),chapter_name:"New Chapter",topic:"New Topic",target_date:null,learning_status:"In Queue",learning_stage:"Initiated",learning_proficiency:"Novice",progress_percentage:0,notes:""},unique_id:"INSERT-".concat(Date.now())},n=[...r];n.splice(e,0,a),c(n),localStorage.setItem("study-plans-data",JSON.stringify(n)),t&&t()}catch(e){console.error("Failed to insert row:",e)}};return h?(0,a.jsx)("div",{className:"study-plan-container",children:(0,a.jsx)("div",{className:"study-plan-header",children:(0,a.jsxs)("div",{className:"header-info",children:[(0,a.jsx)("h1",{children:s?"".concat(s.name," Study Plan"):"Complete Study Plan"}),(0,a.jsx)("p",{children:"Master curriculum management with comprehensive tracking"})]})})}):(0,a.jsx)("div",{className:"study-plan-container",children:(0,a.jsx)("div",{className:"excel-grid-container",children:(0,a.jsxs)("div",{className:"excel-grid",children:[(0,a.jsx)("div",{className:"grid-row header-row",children:x.map(e=>(0,a.jsx)("div",{className:"grid-cell header-cell",style:{width:e.width,minWidth:e.width},children:e.label},e.key))}),r.map(e=>(0,a.jsx)("div",{className:"grid-row data-row",children:x.map(s=>(0,a.jsxs)("div",{className:"grid-cell",style:{width:s.width,minWidth:s.width},children:["actions"===s.key&&(0,a.jsxs)("div",{className:"action-buttons",children:[(0,a.jsx)("button",{className:"action-btn add-btn",onClick:()=>N(r.indexOf(e)),title:"Insert row above",children:"+"}),(0,a.jsx)("button",{className:"action-btn delete-btn",onClick:()=>f(e.unique_id),title:"Delete row",children:"\xd7"})]}),"unique_id"===s.key&&(0,a.jsx)("span",{className:"readonly-cell",children:e.unique_id}),"curriculum"===s.key&&((null==o?void 0:o.uniqueId)===e.unique_id&&"curriculum"===o.columnKey?(0,a.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),onBlur:b,onKeyDown:v,autoFocus:!0,className:"grid-input"}):(0,a.jsx)("span",{className:"editable-cell",onClick:()=>j(e.unique_id,"curriculum",e.curriculum),children:e.curriculum})),"grade"===s.key&&((null==o?void 0:o.uniqueId)===e.unique_id&&"grade"===o.columnKey?(0,a.jsx)("input",{type:"number",value:u,onChange:e=>m(e.target.value),onBlur:b,onKeyDown:v,autoFocus:!0,className:"grid-input",min:"9",max:"12"}):(0,a.jsx)("span",{className:"editable-cell",onClick:()=>j(e.unique_id,"grade",e.grade.toString()),children:e.grade})),"subject"===s.key&&(0,a.jsx)("span",{className:"readonly-cell",children:e.subject}),"chapter_id"===s.key&&(0,a.jsx)("span",{className:"readonly-cell",children:e.chapter_id}),"chapter_name"===s.key&&((null==o?void 0:o.uniqueId)===e.unique_id&&"chapter_name"===o.columnKey?(0,a.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),onBlur:b,onKeyDown:v,autoFocus:!0,className:"grid-input"}):(0,a.jsx)("span",{className:"editable-cell",onClick:()=>j(e.unique_id,"chapter_name",e.chapter_name),children:e.chapter_name})),"topic_id"===s.key&&(0,a.jsx)("span",{className:"readonly-cell",children:e.topic_id}),"topic"===s.key&&((null==o?void 0:o.uniqueId)===e.unique_id&&"topic"===o.columnKey?(0,a.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),onBlur:b,onKeyDown:v,autoFocus:!0,className:"grid-input"}):(0,a.jsx)("span",{className:"editable-cell",onClick:()=>j(e.unique_id,"topic",e.topic),children:e.topic})),"target_date"===s.key&&((null==o?void 0:o.uniqueId)===e.unique_id&&"target_date"===o.columnKey?(0,a.jsx)("input",{type:"date",value:u,onChange:e=>m(e.target.value),onBlur:b,onKeyDown:v,autoFocus:!0,className:"grid-input"}):(0,a.jsx)("span",{className:"editable-cell",onClick:()=>j(e.unique_id,"target_date",e.target_date?new Date(e.target_date).toISOString().split("T")[0]:""),children:e.target_date?new Date(e.target_date).toLocaleDateString():""})),"learning_status"===s.key&&((null==o?void 0:o.uniqueId)===e.unique_id&&"learning_status"===o.columnKey?(0,a.jsx)("select",{value:u,onChange:e=>m(e.target.value),onBlur:b,onKeyDown:v,autoFocus:!0,className:"grid-select",children:s.options.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}):(0,a.jsx)("span",{className:"status-badge",style:{backgroundColor:"".concat(i(e.learning_status),"20"),color:i(e.learning_status),borderColor:i(e.learning_status)},onClick:()=>j(e.unique_id,"learning_status",e.learning_status),children:e.learning_status})),"learning_stage"===s.key&&((null==o?void 0:o.uniqueId)===e.unique_id&&"learning_stage"===o.columnKey?(0,a.jsx)("select",{value:u,onChange:e=>m(e.target.value),onBlur:b,onKeyDown:v,autoFocus:!0,className:"grid-select",children:s.options.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}):(0,a.jsx)("span",{className:"editable-cell",onClick:()=>j(e.unique_id,"learning_stage",e.learning_stage),children:e.learning_stage})),"learning_proficiency"===s.key&&((null==o?void 0:o.uniqueId)===e.unique_id&&"learning_proficiency"===o.columnKey?(0,a.jsx)("select",{value:u,onChange:e=>m(e.target.value),onBlur:b,onKeyDown:v,autoFocus:!0,className:"grid-select",children:s.options.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}):(0,a.jsx)("span",{className:"proficiency-display",onClick:()=>j(e.unique_id,"learning_proficiency",e.learning_proficiency),children:P(e.learning_proficiency)})),"progress_percentage"===s.key&&((null==o?void 0:o.uniqueId)===e.unique_id&&"progress_percentage"===o.columnKey?(0,a.jsx)("input",{type:"number",value:u,onChange:e=>m(e.target.value),onBlur:b,onKeyDown:v,autoFocus:!0,className:"grid-input",min:"0",max:"100"}):(0,a.jsxs)("span",{className:"editable-cell",onClick:()=>j(e.unique_id,"progress_percentage",e.progress_percentage.toString()),children:[e.progress_percentage,"%"]})),"notes"===s.key&&((null==o?void 0:o.uniqueId)===e.unique_id&&"notes"===o.columnKey?(0,a.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),onBlur:b,onKeyDown:v,autoFocus:!0,className:"grid-input"}):(0,a.jsx)("span",{className:"editable-cell",onClick:()=>j(e.unique_id,"notes",e.notes||""),children:e.notes||""}))]},"".concat(e.unique_id,"-").concat(s.key)))},e.unique_id)),(0,a.jsx)("div",{className:"grid-row add-row",children:x.map(e=>(0,a.jsxs)("div",{className:"grid-cell",style:{width:e.width,minWidth:e.width},children:["actions"===e.key&&(0,a.jsx)("button",{className:"action-btn add-btn primary",onClick:y,title:"Add new row",children:"+"}),"actions"!==e.key&&(0,a.jsx)("span",{className:"add-placeholder",children:"Click + to add"})]},"add-".concat(e.key)))})]})})})}function R(){let[e,s]=(0,n.useState)([]),[t,i]=(0,n.useState)(!1),[l,r]=(0,n.useState)(new Date),[c,m]=(0,n.useState)({title:"",type:"school",date:new Date,description:"",recurring:!1,recurringType:"monthly"});(0,n.useEffect)(()=>{let e=localStorage.getItem("schedule-events");if(e)s(JSON.parse(e).map(e=>({...e,date:new Date(e.date)})));else{let e=[{id:1,title:"School Period",type:"school",date:new Date(2025,9,18),description:"Regular school classes",recurring:!0,recurringType:"weekly"},{id:2,title:"Diwali Festival",type:"festival",date:new Date(2025,10,5),description:"Festival of lights",recurring:!1},{id:3,title:"Birthday - Mom",type:"birthday",date:new Date(2025,11,15),description:"Mother's birthday",recurring:!0,recurringType:"yearly"}];s(e),localStorage.setItem("schedule-events",JSON.stringify(e))}},[]),(0,n.useEffect)(()=>{localStorage.setItem("schedule-events",JSON.stringify(e))},[e]);let h=e=>{switch(e){case"school":return(0,a.jsx)(d,{});case"menstrual":return(0,a.jsx)(S,{});case"festival":return(0,a.jsx)(C,{});case"birthday":return(0,a.jsx)(_,{});case"holiday":return(0,a.jsx)(D,{});default:return(0,a.jsx)(u,{})}},p=e=>{switch(e){case"school":return"bg-blue-100 text-blue-800 border-blue-200";case"menstrual":return"bg-pink-100 text-pink-800 border-pink-200";case"festival":return"bg-purple-100 text-purple-800 border-purple-200";case"birthday":return"bg-green-100 text-green-800 border-green-200";case"holiday":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=()=>{let s=new Date;return e.filter(e=>e.date>=s).sort((e,s)=>e.date-s.date).slice(0,5)},g=s=>e.filter(e=>e.date.toDateString()===s.toDateString()),j=e=>e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)(D,{}),"Schedule Tracker"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Track important dates, periods, and events"})]}),(0,a.jsxs)("button",{onClick:()=>i(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,a.jsx)(k,{}),"Add Event"]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Calendar"}),(0,a.jsx)("div",{className:"calendar-container",children:(0,a.jsx)(o.Ay,{selected:l,onChange:r,inline:!0,className:"w-full"})}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium mb-3",children:["Events on ",j(l)]}),(0,a.jsx)("div",{className:"space-y-3",children:0===g(l).length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No events scheduled"}):g(l).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(p(e.type)),children:h(e.type)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),e.recurring&&(0,a.jsxs)("span",{className:"text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded",children:["Recurring ",e.recurringType]})]})]}),(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void s(e=>e.filter(e=>e.id!==t))},className:"text-red-500 hover:text-red-700 p-1",children:"\xd7"})]},e.id))})]})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Upcoming Events"}),(0,a.jsxs)("div",{className:"space-y-3",children:[x().map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(p(e.type)," flex-shrink-0"),children:h(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:j(e.date)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.description})]})]},e.id)),0===x().length&&(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No upcoming events"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Event Types"}),(0,a.jsx)("div",{className:"space-y-2",children:[{type:"school",label:"School Period",icon:d},{type:"menstrual",label:"Menstrual Period",icon:S},{type:"festival",label:"Festival Holiday",icon:C},{type:"birthday",label:"Birthday",icon:_},{type:"holiday",label:"Public Holiday",icon:D}].map(e=>{let{type:s,label:t,icon:n}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(p(s)),children:(0,a.jsx)(n,{})}),(0,a.jsx)("span",{className:"text-sm",children:t})]},s)})})]})]})]})}),t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add New Event"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Title"}),(0,a.jsx)("input",{type:"text",value:c.title,onChange:e=>m(s=>({...s,title:e.target.value})),className:"w-full p-2 border rounded-lg",placeholder:"Event title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Type"}),(0,a.jsxs)("select",{value:c.type,onChange:e=>m(s=>({...s,type:e.target.value})),className:"w-full p-2 border rounded-lg",children:[(0,a.jsx)("option",{value:"school",children:"School Period"}),(0,a.jsx)("option",{value:"menstrual",children:"Menstrual Period"}),(0,a.jsx)("option",{value:"festival",children:"Festival Holiday"}),(0,a.jsx)("option",{value:"birthday",children:"Birthday"}),(0,a.jsx)("option",{value:"holiday",children:"Public Holiday"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date"}),(0,a.jsx)(o.Ay,{selected:c.date,onChange:e=>m(s=>({...s,date:e})),className:"w-full p-2 border rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:c.description,onChange:e=>m(s=>({...s,description:e.target.value})),className:"w-full p-2 border rounded-lg",rows:3,placeholder:"Optional description"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"recurring",checked:c.recurring,onChange:e=>m(s=>({...s,recurring:e.target.checked}))}),(0,a.jsx)("label",{htmlFor:"recurring",className:"text-sm",children:"Recurring event"})]}),c.recurring&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Recurring Type"}),(0,a.jsxs)("select",{value:c.recurringType,onChange:e=>m(s=>({...s,recurringType:e.target.value})),className:"w-full p-2 border rounded-lg",children:[(0,a.jsx)("option",{value:"daily",children:"Daily"}),(0,a.jsx)("option",{value:"weekly",children:"Weekly"}),(0,a.jsx)("option",{value:"monthly",children:"Monthly"}),(0,a.jsx)("option",{value:"yearly",children:"Yearly"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{if(!c.title.trim())return;let e={id:Date.now(),...c};s(s=>[...s,e]),m({title:"",type:"school",date:new Date,description:"",recurring:!1,recurringType:"monthly"}),i(!1)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Event"})]})]})})]})}function q(){let[e,s]=(0,n.useState)([]),t=useRef(null);(0,n.useEffect)(()=>{let e=[{id:"sleep",name:"Sleep Timer",description:"Time to wind down and sleep",icon:(0,a.jsx)(MoonIcon,{}),duration:1800,timeLeft:1800,isRunning:!1,presets:[15,30,45,60]},{id:"screen",name:"Screen Timer",description:"Limit screen time for eye health",icon:(0,a.jsx)(EyeIcon,{}),duration:3600,timeLeft:3600,isRunning:!1,presets:[30,60,90,120]},{id:"break",name:"Break Timer",description:"Take a break from studying",icon:(0,a.jsx)(u,{}),duration:600,timeLeft:600,isRunning:!1,presets:[5,10,15,20]},{id:"wakeup",name:"Wakeup Alarm",description:"Gentle morning wake up",icon:(0,a.jsx)(SunIcon,{}),duration:900,timeLeft:900,isRunning:!1,presets:[10,15,20,30]},{id:"food",name:"Food Timer",description:"Cooking or meal preparation",icon:(0,a.jsx)(UtensilsIcon,{}),duration:1200,timeLeft:1200,isRunning:!1,presets:[10,15,20,30]},{id:"fitness",name:"Fitness Timer",description:"Exercise and workout sessions",icon:(0,a.jsx)(DumbbellIcon,{}),duration:2700,timeLeft:2700,isRunning:!1,presets:[15,30,45,60]}],t=localStorage.getItem("timer-states");if(t){let a=JSON.parse(t);s(e.map(e=>{let s=a.find(s=>s.id===e.id);return s?{...e,...s}:e}))}else s(e)},[]),(0,n.useEffect)(()=>{e.length>0&&localStorage.setItem("timer-states",JSON.stringify(e))},[e]),(0,n.useEffect)(()=>(e.filter(e=>e.isRunning).length>0?t.current=setInterval(()=>{s(e=>e.map(e=>e.isRunning&&e.timeLeft>0?{...e,timeLeft:e.timeLeft-1}:e.isRunning&&0===e.timeLeft?{...e,isRunning:!1}:e))},1e3):t.current&&clearInterval(t.current),()=>{t.current&&clearInterval(t.current)}),[e]),(0,n.useEffect)(()=>{e.forEach(e=>{if(0===e.timeLeft&&!e.isRunning){let s=new(window.AudioContext||window.webkitAudioContext),t=s.createOscillator(),a=s.createGain();t.connect(a),a.connect(s.destination),t.frequency.setValueAtTime(800,s.currentTime),a.gain.setValueAtTime(.3,s.currentTime),a.gain.exponentialRampToValueAtTime(.01,s.currentTime+.5),t.start(s.currentTime),t.stop(s.currentTime+.5),"granted"===Notification.permission&&new Notification("".concat(e.name," Completed!"),{body:"".concat(e.description," - Time's up!"),icon:"/favicon.ico"})}})},[e]);let i=(e,t)=>{s(s=>s.map(s=>s.id===e?{...s,duration:t,timeLeft:t,isRunning:!1}:s))};return(0,n.useEffect)(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]),(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex justify-between items-center py-6",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)(u,{}),"Timer Dashboard"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Track time for various activities and routines"})]})})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,a.jsxs)("div",{className:"rounded-xl border-2 p-6 transition-all duration-300 ".concat(e.isRunning?"border-green-500 bg-green-50":0===e.timeLeft?"border-red-500 bg-red-50":"border-gray-300 bg-white"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-mono font-bold",children:(()=>{let s=Math.floor(e.timeLeft/3600),t=Math.floor(e.timeLeft%3600/60),a=e.timeLeft%60;return s>0?"".concat(s.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))})()}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["of ",(()=>{let s=Math.floor(e.duration/3600),t=Math.floor(e.duration%3600/60),a=e.duration%60;return s>0?"".concat(s.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))})()]})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(e.isRunning?"bg-green-500":0===e.timeLeft?"bg-red-500":"bg-blue-500"),style:{width:"".concat((e.duration-e.timeLeft)/e.duration*100,"%")}})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[!e.isRunning&&e.timeLeft===e.duration&&(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void s(e=>e.map(e=>e.id===t?{...e,isRunning:!0}:e))},className:"p-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:(0,a.jsx)(PlayIcon,{})}),e.isRunning&&(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void s(e=>e.map(e=>e.id===t?{...e,isRunning:!1}:e))},className:"p-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors",children:(0,a.jsx)(PauseIcon,{})}),e.isRunning||e.timeLeft<e.duration&&(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void s(e=>e.map(e=>e.id===t?{...e,isRunning:!1,timeLeft:e.duration}:e))},className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:(0,a.jsx)(StopIcon,{})}),(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void s(e=>e.map(e=>e.id===t?{...e,isRunning:!1,timeLeft:e.duration}:e))},className:"p-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:(0,a.jsx)(ResetIcon,{})})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[e.presets.map((s,t)=>(0,a.jsxs)("button",{onClick:()=>i(e.id,60*s),className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:[s,"m"]},t)),(0,a.jsx)("button",{onClick:()=>{let s=prompt("Enter duration in minutes:");s&&parseInt(s)>0&&i(e.id,60*parseInt(s))},className:"px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded hover:bg-purple-200 transition-colors",children:"Custom"})]})]}),0===e.timeLeft&&!e.isRunning&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-red-100 text-red-800 rounded-lg text-center font-medium",children:["⏰ Time's up! ",e.name," completed."]}),e.isRunning&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-green-100 text-green-800 rounded-lg text-center font-medium",children:["▶️ ",e.name," is running..."]})]},e.id))}),(0,a.jsxs)("div",{className:"mt-12 bg-white rounded-xl shadow-sm border p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"How to Use"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Timer Controls"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Play"}),": Start the timer"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Pause"}),": Pause the running timer"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Stop"}),": Stop and reset to full duration"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Reset"}),": Reset to original duration"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Duration Presets"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsx)("li",{children:"• Quick preset buttons for common durations"}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Custom"}),": Set any duration in minutes"]}),(0,a.jsx)("li",{children:"• All changes apply immediately"})]})]})]})]})]})]})}function B(){let[e,s]=(0,n.useState)(null),[t,i]=(0,n.useState)(null),[l,r]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("study-plans-data")||"[]"),t=e.length,a=e.filter(e=>"Done"===e.learning_status).length,n=e.filter(e=>"In Progress"===e.learning_status).length,l=e.reduce((e,s)=>e+(s.progress_percentage||0),0),c=t>0?Math.round(l/t):0,o={};e.forEach(e=>{o[e.subject]||(o[e.subject]={total:0,completed:0,inProgress:0}),o[e.subject].total++,"Done"===e.learning_status&&o[e.subject].completed++,"In Progress"===e.learning_status&&o[e.subject].inProgress++}),s({totalTopics:t,completedTopics:a,inProgressTopics:n,averageProgress:c,subjectStats:o});let d=JSON.parse(localStorage.getItem("timer-states")||"[]");i({totalTimerSessions:d.length,activeTimers:d.filter(e=>e.isRunning).length,timers:d});let u=JSON.parse(localStorage.getItem("schedule-events")||"[]"),m=u.filter(e=>new Date(e.date)>=new Date).length;r({totalEvents:u.length,upcomingEvents:m,events:u})},[]);let c=e?Object.entries(e.subjectStats).map(e=>{let[s,t]=e;return{label:s.substring(0,3),value:Math.round(t.completed/t.total*100)}}):[];return e?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex justify-between items-center py-6",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)(y,{}),"Dashboard"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Track your progress and productivity"})]})})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"p-6 rounded-xl border bg-blue-50 border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Study Progress"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-blue-700",children:[e.averageProgress,"%"]}),(0,a.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:[e.completedTopics,"/",e.totalTopics," topics"]}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(f,{}),(0,a.jsx)("span",{className:"text-sm ml-1 text-blue-600",children:"+5% this week"})]})]}),(0,a.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,a.jsx)(d,{})})]})}),(0,a.jsx)("div",{className:"p-6 rounded-xl border bg-green-50 border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Active Timers"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-700",children:(null==t?void 0:t.activeTimers)||0}),(0,a.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Currently running"})]}),(0,a.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,a.jsx)(u,{})})]})}),(0,a.jsx)("div",{className:"p-6 rounded-xl border bg-yellow-50 border-yellow-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-yellow-600",children:"Upcoming Events"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-yellow-700",children:(null==l?void 0:l.upcomingEvents)||0}),(0,a.jsx)("p",{className:"text-sm text-yellow-600 mt-1",children:"This month"})]}),(0,a.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,a.jsx)(D,{})})]})}),(0,a.jsx)("div",{className:"p-6 rounded-xl border bg-purple-50 border-purple-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-purple-600",children:"Study Streak"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-purple-700",children:"7"}),(0,a.jsx)("p",{className:"text-sm text-purple-600 mt-1",children:"Days in a row"}),(0,a.jsx)("p",{className:"text-sm text-purple-600 mt-2",children:"Keep it up!"})]}),(0,a.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,a.jsx)(N,{})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Weekly Study Progress"}),(0,a.jsx)("div",{className:"flex items-end justify-between h-32 gap-2",children:[{label:"Mon",value:65},{label:"Tue",value:78},{label:"Wed",value:82},{label:"Thu",value:71},{label:"Fri",value:89},{label:"Sat",value:94},{label:"Sun",value:76}].map((e,s)=>(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-full bg-blue-500 rounded-t transition-all duration-300",style:{height:"".concat(e.value/100*100,"%")}}),(0,a.jsx)("span",{className:"text-xs text-gray-600 mt-2 text-center",children:e.label})]},s))})]}),c.length>0&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Subject-wise Progress"}),(0,a.jsx)("div",{className:"flex items-end justify-between h-32 gap-2",children:c.map((e,s)=>(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-full bg-green-500 rounded-t transition-all duration-300",style:{height:"".concat(e.value,"%")}}),(0,a.jsx)("span",{className:"text-xs text-gray-600 mt-2 text-center",children:e.label})]},s))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Study Topics Progress"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Completed Topics"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.completedTopics,"/",e.totalTopics]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 bg-green-500",style:{width:"".concat(e.completedTopics/e.totalTopics*100,"%")}})})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"In Progress Topics"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.inProgressTopics,"/",e.totalTopics]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 bg-blue-500",style:{width:"".concat(e.inProgressTopics/e.totalTopics*100,"%")}})})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Remaining Topics"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.totalTopics-e.completedTopics-e.inProgressTopics,"/",e.totalTopics]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 bg-yellow-500",style:{width:"".concat((e.totalTopics-e.completedTopics-e.inProgressTopics)/e.totalTopics*100,"%")}})})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Subject Breakdown"}),(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(e.subjectStats).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:s}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[t.completed,"/",t.total]}),(0,a.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(t.completed/t.total*100,"%")}})})]})]},s)})})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(w,{})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Completed Physics Chapter 1"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"2 hours ago"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(u,{})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Started 25-minute study timer"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"4 hours ago"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)(D,{})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Added Diwali festival to schedule"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"1 day ago"})]})]})]})]})]})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})})}function A(){let[e,s]=(0,n.useState)([]),[t,c]=(0,n.useState)([]),[f,N]=(0,n.useState)(null),[w,k]=(0,n.useState)(!0),[S,C]=(0,n.useState)(null),[_,P]=(0,n.useState)(null),[I,A]=(0,n.useState)(null),[W,F]=(0,n.useState)([]),[O,H]=(0,n.useState)([]),[K,J]=(0,n.useState)(""),[V,Q]=(0,n.useState)("All"),[U,G]=(0,n.useState)("All"),[Z,Y]=(0,n.useState)(null),[X,$]=(0,n.useState)("ocean"),[ee,es]=(0,n.useState)("default"),[et,ea]=(0,n.useState)("kanban"),[en,ei]=(0,n.useState)([]),[el,er]=(0,n.useState)(!1),[ec,eo]=(0,n.useState)(!1),[ed,eu]=(0,n.useState)("zen-mixed"),[em,eh]=(0,n.useState)(.2),[ep,ex]=(0,n.useState)(!0),[eg,ej]=(0,n.useState)(!0),[eb,ev]=(0,n.useState)(null),[ey,ef]=(0,n.useState)({top:0,left:0}),[eN,ew]=(0,n.useState)([]),[ek,eS]=(0,n.useState)(""),[eC,e_]=(0,n.useState)([]),[eD,eT]=(0,n.useState)(!1),[eP,eL]=(0,n.useState)(null),[eM,eI]=(0,n.useState)(!0),[eE,ez]=(0,n.useState)("kanban"),[eR,eq]=(0,n.useState)(""),[eB,eA]=(0,n.useState)("default"),[eW,eF]=(0,n.useState)(new Set),[eO,eH]=(0,n.useState)("all"),[eK,eJ]=(0,n.useState)(!1),eV=e=>({"In Queue":"#6b7280","To Do":"#3b82f6","In Progress":"#f59e0b",Done:"#10b981",Closed:"#8b5cf6"})[e]||"#6b7280",eQ=e=>({Novice:"#ef4444",Competent:"#f59e0b",Expert:"#3b82f6",Master:"#10b981"})[e]||"#6b7280",eU=(0,l.FR)((0,l.MS)(l.AN),(0,l.MS)(l.uN,{coordinateGetter:r.JR})),eG=[{id:"backlog",name:"Backlog",status:"In Queue"},{id:"todo",name:"To Do",status:"To Do"},{id:"inprogress",name:"In Progress",status:"In Progress"},{id:"done",name:"Done",status:"Done"}];(0,n.useEffect)(()=>{if(en&&en.length>0&&f){let e=en.filter(e=>e.subject===f.name),s=M(e),t={};s.forEach(e=>{let s=e.aggregatedStatus||"Unknown";t[s]=(t[s]||0)+1}),console.log("\uD83D\uDCCA Chapters for ".concat(f.name,":"),{totalChapters:s.length,totalTopics:e.length,statusDistribution:t,chapters:s.map(e=>({name:e.chapter_name,status:e.aggregatedStatus,topics:e.totalTopics}))})}},[en,f]),(0,n.useEffect)(()=>{eZ()},[]),(0,n.useEffect)(()=>{document.body.className="bg-".concat(X)},[X]),(0,n.useEffect)(()=>{if(eg&&ep){let e=setInterval(()=>{let e=["zen-mixed","zen-forest","zen-rain","zen-wind","zen-birds","zen-water"],s=(e.indexOf(ed)+1)%e.length;eu(e[s])},18e5);return()=>clearInterval(e)}},[eg,ep,ed]);let eZ=async()=>{let e=[];try{let s=await fetch("/ProdyJEE/database-export.json");if(s.ok){let t=await s.json();e=t.studyPlans||t,console.log("✅ Loaded ".concat(e.length," records from database export"))}else throw Error("Database export not found")}catch(t){console.warn("⚠️ Database export not available, trying localStorage...",t.message);let s=localStorage.getItem("study-plans-data");if(s)try{e=JSON.parse(s),console.log("✅ Loaded ".concat(e.length," records from localStorage"))}catch(s){console.error("❌ Failed to parse localStorage data:",s),e=[]}0===e.length&&(console.warn("⚠️ Using fallback demo data"),e=[{unique_id:"PHY-1.1",curriculum:"CBSE",grade:12,subject:"Physics",chapter_id:"PHY-1",chapter_name:"Physical World",topic_id:"PHY-1.1",topic:"Scope and excitement of physics",target_date:"2025-12-31T00:00:00.000Z",learning_status:"Done",learning_stage:"Practiced",learning_proficiency:"Expert",progress_percentage:100,notes:"Completed all practice problems and revision."},{unique_id:"PHY-1.2",curriculum:"CBSE",grade:12,subject:"Physics",chapter_id:"PHY-1",chapter_name:"Physical World",topic_id:"PHY-1.2",topic:"Physics technology and society",target_date:"2025-12-31T00:00:00.000Z",learning_status:"In Progress",learning_stage:"Studied",learning_proficiency:"Competent",progress_percentage:66,notes:"Working on applications in daily life."},{unique_id:"PHY-1.3",curriculum:"CBSE",grade:12,subject:"Physics",chapter_id:"PHY-1",chapter_name:"Physical World",topic_id:"PHY-1.3",topic:"Nature of physical laws",target_date:"2025-12-31T00:00:00.000Z",learning_status:"To Do",learning_stage:"Initiated",learning_proficiency:"Novice",progress_percentage:0,notes:"Need to start studying fundamental laws."},{unique_id:"CHM-1.1",curriculum:"CBSE",grade:12,subject:"Chemistry",chapter_id:"CHM-1",chapter_name:"The Solid State",topic_id:"CHM-1.1",topic:"General characteristics of solid state",target_date:"2025-12-31T00:00:00.000Z",learning_status:"To Do",learning_stage:"Initiated",learning_proficiency:"Novice",progress_percentage:0,notes:"Need to start studying crystal structures."},{unique_id:"CHM-1.2",curriculum:"CBSE",grade:12,subject:"Chemistry",chapter_id:"CHM-1",chapter_name:"The Solid State",topic_id:"CHM-1.2",topic:"Classification of solids",target_date:"2025-12-31T00:00:00.000Z",learning_status:"In Queue",learning_stage:"Initiated",learning_proficiency:"Novice",progress_percentage:0,notes:"Study crystalline and amorphous solids."},{unique_id:"MTH-1.1",curriculum:"CBSE",grade:12,subject:"Mathematics",chapter_id:"MTH-1",chapter_name:"Relations and Functions",topic_id:"MTH-1.1",topic:"Introduction to relations and functions",target_date:"2025-12-31T00:00:00.000Z",learning_status:"In Queue",learning_stage:"Initiated",learning_proficiency:"Novice",progress_percentage:0,notes:"Basic concepts of sets and relations."}])}let t=[...new Set(e.map(e=>e.subject))].map((e,s)=>({subject_id:s+1,name:e,Chapters:[]}));s([]),c(t),ei(e),t.length>0&&N(t[0]),k(!1)},eY=async()=>{if(confirm("Are you sure you want to delete ALL study plan cards? This action cannot be undone."))try{ei([]),localStorage.removeItem("study-plans-data"),alert("All study plan cards have been deleted successfully.")}catch(e){console.error("Failed to delete all cards:",e),alert("Failed to delete all cards. Please try again.")}},eX=async e=>{let{active:s,over:t}=e;if(!t)return;let a=s.id,n=t.id;if(a.startsWith("chapter-")){let e=a.replace("chapter-",""),s=eG.find(e=>e.id===n);if(s){let t=document.querySelector('[data-id="'.concat(a,'"]'));t&&(t.classList.add("dropping"),setTimeout(()=>{t.classList.remove("dropping")},600));try{let t=M(en.filter(e=>e.subject===f.name)).find(s=>s.chapter_id===e);t&&ei(e=>e.map(e=>t.studyPlans.some(s=>s.unique_id===e.unique_id)?{...e,learning_status:s.status}:e))}catch(e){console.error("Failed to update chapter:",e)}}}},e$=async(e,s)=>{C(e)},e0=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),s=new MediaRecorder(e),t=[];s.ondataavailable=e=>{e.data.size>0&&t.push(e.data)},s.onstop=()=>{let s=new Blob(t,{type:"audio/wav"}),a=URL.createObjectURL(s),n={id:Date.now(),url:a,blob:s,timestamp:new Date().toLocaleString()};e_([...eC,n]),e.getTracks().forEach(e=>e.stop())},eL(s),s.start(),eT(!0)}catch(e){console.error("Error starting recording:",e),alert("Could not access microphone. Please check permissions.")}},e2=e=>e.filter(e=>{if("all"!==eO&&e.aggregatedStatus!==eO)return!1;if(eR){let s=eR.toLowerCase(),t=e.chapter_name.toLowerCase().includes(s),a=e.studyPlans.some(e=>e.topic.toLowerCase().includes(s));return t||a}return!0}),e1=e=>{if(0===eW.size)return void alert("Please select chapters first");if(!confirm("Update status of ".concat(eW.size,' chapter(s) to "').concat(e,'"?')))return;let s=en.map(s=>eW.has(s.chapter_id)?{...s,learning_status:e}:s);ei(s),localStorage.setItem("study-plans-data",JSON.stringify(s)),eF(new Set),eJ(!1)},e3=e=>{let s=new Set(eW);s.has(e)?s.delete(e):s.add(e),eF(s)};return w?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{className:"planner",children:[(0,a.jsx)("nav",{className:"top-navbar navbar-".concat(ee||"default"),children:(0,a.jsxs)("div",{className:"navbar-content",children:[(0,a.jsxs)("div",{className:"navbar-brand",children:[(0,a.jsxs)("div",{className:"brand-logo",children:[(0,a.jsx)("span",{className:"brand-main",children:"Prody"}),(0,a.jsx)("span",{className:"brand-jee",children:"JEE"}),(0,a.jsx)("span",{className:"brand-accent",children:"™"})]}),(0,a.jsxs)("div",{className:"brand-subtitle",children:[(0,a.jsx)("span",{children:"Peepal Prodigy School"}),(0,a.jsxs)("span",{className:"version-tag",children:["v",i.rE]})]})]}),f&&"kanban"===et&&(0,a.jsx)("div",{className:"navbar-center",children:(0,a.jsxs)("h3",{className:"navbar-title",children:["Kanban Board - ",f.name," (",M(en.filter(e=>e.subject===f.name)).length," chapters)"]})}),(0,a.jsxs)("div",{className:"navbar-actions",children:[(0,a.jsx)("button",{className:"nav-action-btn ".concat("kanban"===eE?"active":""),onClick:()=>ez("kanban"),title:"Kanban Board",children:(0,a.jsx)(h,{})}),(0,a.jsx)("button",{className:"nav-action-btn ".concat("schedule"===eE?"active":""),onClick:()=>ez("schedule"),title:"Schedule",children:(0,a.jsx)(D,{})}),(0,a.jsx)("button",{className:"nav-action-btn ".concat("timer"===eE?"active":""),onClick:()=>ez("timer"),title:"Timer",children:(0,a.jsx)(u,{})}),(0,a.jsx)("button",{className:"nav-action-btn ".concat("dashboard"===eE?"active":""),onClick:()=>ez("dashboard"),title:"Dashboard",children:(0,a.jsx)(y,{})}),(0,a.jsx)("div",{className:"nav-separator"}),(0,a.jsx)("button",{className:"nav-action-btn",onClick:()=>eo(!0),title:"Settings",children:(0,a.jsx)(x,{})}),(0,a.jsx)("button",{className:"nav-action-btn",onClick:()=>{},title:"Themes",children:(0,a.jsx)(m,{})}),(0,a.jsx)("a",{href:"/login",className:"nav-action-btn user-profile",title:"User Profile",children:(0,a.jsx)(j,{})})]})]})}),(0,a.jsx)("div",{className:"horizontal-navbar",children:(0,a.jsxs)("div",{className:"nav-content",children:[(0,a.jsx)("div",{className:"breadcrumb-section",children:(0,a.jsxs)("div",{className:"breadcrumb-path",children:[(0,a.jsx)("span",{className:"breadcrumb-item",children:"Home"}),(0,a.jsx)("span",{className:"breadcrumb-separator",children:"/"}),(0,a.jsx)("span",{className:"breadcrumb-item active",children:"Study Plans"}),f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"breadcrumb-separator",children:"/"}),(0,a.jsx)("span",{className:"breadcrumb-item active",children:f.name})]})]})}),(0,a.jsxs)("div",{className:"filter-tabs-section",children:[(0,a.jsx)("div",{className:"filter-group",children:(0,a.jsx)("div",{className:"filter-tabs",children:t.slice(0,4).map(e=>(0,a.jsxs)("button",{className:"filter-tab ".concat((null==f?void 0:f.subject_id)===e.subject_id?"active":""),onClick:()=>N(e),children:[(0,a.jsx)(d,{}),(0,a.jsx)("span",{children:e.name})]},e.subject_id))})}),(0,a.jsx)("div",{className:"filter-group",children:(0,a.jsxs)("div",{className:"view-toggle-tabs",children:[(0,a.jsxs)("button",{className:"view-tab ".concat("kanban"===et?"active":""),onClick:()=>ea("kanban"),title:"Kanban View",children:[(0,a.jsx)(d,{}),(0,a.jsx)("span",{children:"Kanban"})]}),(0,a.jsxs)("button",{className:"view-tab ".concat("study-plan"===et?"active":""),onClick:()=>ea("study-plan"),title:"Study Plan View",children:[(0,a.jsx)(h,{}),(0,a.jsx)("span",{children:"Study Plan"})]})]})})]})]})}),(0,a.jsxs)("div",{className:"sidebar ".concat(eM?"collapsed":"expanded"),children:[(0,a.jsx)("div",{className:"sidebar-header",children:(0,a.jsx)("button",{className:"sidebar-toggle",onClick:()=>eI(!eM),title:eM?"Expand Sidebar":"Collapse Sidebar",children:eM?"☰":"✕"})}),(0,a.jsxs)("div",{className:"sidebar-content",children:[(0,a.jsxs)("div",{className:"sidebar-item",title:"Dashboard",children:[(0,a.jsx)(b,{}),!eM&&(0,a.jsx)("span",{children:"Dashboard"})]}),(0,a.jsxs)("div",{className:"sidebar-item",title:"Charts",children:[(0,a.jsx)(v,{}),!eM&&(0,a.jsx)("span",{children:"Charts"})]}),(0,a.jsxs)("div",{className:"sidebar-item",title:"Schedule",children:[(0,a.jsx)(D,{}),!eM&&(0,a.jsx)("span",{children:"Schedule"})]}),(0,a.jsxs)("div",{className:"sidebar-item",title:"Timer",children:[(0,a.jsx)(T,{}),!eM&&(0,a.jsx)("span",{children:"Timer"})]}),(0,a.jsxs)("div",{className:"sidebar-item",title:"Relax",children:[(0,a.jsx)(L,{}),!eM&&(0,a.jsx)("span",{children:"Relax"})]})]}),(0,a.jsx)("div",{className:"sidebar-footer",children:!eM&&(0,a.jsx)("div",{className:"sidebar-attribution",children:"by Sasha Nagarajan, 11th Grade, Peepal Prodigy School, Madukkarai, Coimbatore"})})]}),(0,a.jsxs)("main",{className:"board",children:["kanban"===eE&&(0,a.jsxs)(a.Fragment,{children:[f&&"kanban"===et&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"15px 20px",margin:"10px",borderRadius:"8px",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[(0,a.jsxs)("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap",alignItems:"center"},children:[(0,a.jsx)("div",{style:{flex:1,minWidth:"200px"},children:(0,a.jsx)("input",{type:"text",placeholder:"\uD83D\uDD0D Search chapters or topics...",value:eR,onChange:e=>eq(e.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"none",fontSize:"14px"}})}),(0,a.jsxs)("select",{value:eO,onChange:e=>eH(e.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"none",fontSize:"14px",backgroundColor:"rgba(255,255,255,0.9)",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"all",children:"\uD83D\uDCCB All Status"}),(0,a.jsx)("option",{value:"Done",children:"✅ Done"}),(0,a.jsx)("option",{value:"In Progress",children:"⚙️ In Progress"}),(0,a.jsx)("option",{value:"To Do",children:"\uD83D\uDCDD To Do"}),(0,a.jsx)("option",{value:"In Queue",children:"\uD83D\uDCCC Backlog"})]}),(0,a.jsxs)("select",{value:eB,onChange:e=>eA(e.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"none",fontSize:"14px",backgroundColor:"rgba(255,255,255,0.9)",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"default",children:"↕️ Sort By"}),(0,a.jsx)("option",{value:"progress",children:"\uD83D\uDCCA Progress"}),(0,a.jsx)("option",{value:"duedate",children:"\uD83D\uDCC5 Due Date"}),(0,a.jsx)("option",{value:"proficiency",children:"⭐ Proficiency"})]}),(0,a.jsx)("button",{onClick:()=>{let e=e2(M(en.filter(e=>e.subject===f.name))),s=new Set;e.forEach(e=>{s.add(e.chapter_id)}),eF(s)},style:{padding:"8px 12px",borderRadius:"6px",border:"none",fontSize:"14px",backgroundColor:"#8b5cf6",color:"white",cursor:"pointer",fontWeight:"500"},children:"✓ Select All"}),(0,a.jsx)("button",{onClick:()=>{eF(new Set)},style:{padding:"8px 12px",borderRadius:"6px",border:"none",fontSize:"14px",backgroundColor:"#9ca3af",color:"white",cursor:"pointer",fontWeight:"500"},children:"✕ Deselect All"}),eW.size>0&&(0,a.jsxs)("button",{onClick:()=>eJ(!eK),style:{padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:"#ff6b6b",color:"white",cursor:"pointer",fontWeight:"bold",fontSize:"14px"},children:["\uD83C\uDFAF ",eW.size," selected"]})]}),eK&&(0,a.jsxs)("div",{style:{marginTop:"10px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[(0,a.jsx)("button",{onClick:()=>e1("Done"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",backgroundColor:"#10b981",color:"white",cursor:"pointer",fontSize:"12px"},children:"✅ Mark Done"}),(0,a.jsx)("button",{onClick:()=>e1("In Progress"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",backgroundColor:"#f59e0b",color:"white",cursor:"pointer",fontSize:"12px"},children:"⚙️ In Progress"}),(0,a.jsx)("button",{onClick:()=>e1("To Do"),style:{padding:"6px 12px",borderRadius:"4px",border:"none",backgroundColor:"#3b82f6",color:"white",cursor:"pointer",fontSize:"12px"},children:"\uD83D\uDCDD To Do"}),(0,a.jsx)("button",{onClick:()=>{eF(new Set),eJ(!1)},style:{padding:"6px 12px",borderRadius:"4px",border:"1px solid white",backgroundColor:"transparent",color:"white",cursor:"pointer",fontSize:"12px"},children:"✕ Cancel"})]})]}),(0,a.jsx)(l.Mp,{sensors:eU,collisionDetection:l.y$,onDragEnd:eX,children:(0,a.jsx)("div",{className:"kanban-board",children:(0,a.jsx)("div",{className:"buckets-container",children:eG.map(e=>{let s=(e=>{let s=[...e];switch(eB){case"progress":return s.sort((e,s)=>s.averageProgress-e.averageProgress);case"duedate":return s.sort((e,s)=>(e.studyPlans.map(e=>new Date(e.target_date)).filter(e=>!isNaN(e))[0]||new Date(9999,0,1))-(s.studyPlans.map(e=>new Date(e.target_date)).filter(e=>!isNaN(e))[0]||new Date(9999,0,1)));case"proficiency":let t={Master:0,Expert:1,Competent:2,Novice:3};return s.sort((e,s)=>Math.max(...e.studyPlans.map(e=>t[e.learning_proficiency]||999))-Math.max(...s.studyPlans.map(e=>t[e.learning_proficiency]||999)));default:return s}})(e2(M(en.filter(e=>e.subject===f.name)))).filter(s=>s.aggregatedStatus===e.status);return(0,a.jsx)(E,{bucket:e,chapters:s,onEditChapter:e$,onUpdateProgress:eZ,getStatusColor:eV,getProficiencyColor:eQ,selectedChapters:eW,onToggleChapterSelect:e3},e.id)})})})})]}),f&&"study-plan"===et&&(0,a.jsx)(z,{subject:f,onUpdate:eZ,getStatusColor:eV,getProficiencyColor:eQ})]}),"schedule"===eE&&(0,a.jsx)(R,{}),"timer"===eE&&(0,a.jsx)(q,{}),"dashboard"===eE&&(0,a.jsx)(B,{})]}),(0,a.jsxs)(a.Fragment,{children:[_&&(0,a.jsx)("div",{className:"modal-overlay",children:(0,a.jsxs)("div",{className:"task-modal",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("h2",{children:_.title}),(0,a.jsx)("button",{className:"close-btn",onClick:()=>P(null),children:"\xd7"})]}),(0,a.jsxs)("div",{className:"modal-body",children:[(0,a.jsx)("div",{className:"task-details",children:(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault();let s=new FormData(e.target),t=en.map(e=>e.unique_id===_.unique_id?{...e,topic:s.get("title"),notes:s.get("description"),progress_percentage:parseInt(s.get("progress"))}:e);ei(t),localStorage.setItem("study-plans-data",JSON.stringify(t)),P(null),fetchPlans()},children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Title"}),(0,a.jsx)("input",{name:"title",defaultValue:_.title,required:!0})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Description"}),(0,a.jsx)("textarea",{name:"description",defaultValue:_.description,rows:"3"})]}),(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Priority"}),(0,a.jsxs)("select",{name:"priority",defaultValue:_.priority,children:[(0,a.jsx)("option",{children:"Low"}),(0,a.jsx)("option",{children:"Medium"}),(0,a.jsx)("option",{children:"High"}),(0,a.jsx)("option",{children:"Important"})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Progress (%)"}),(0,a.jsx)("input",{name:"progress",type:"number",min:"0",max:"100",defaultValue:_.progress})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Due Date"}),(0,a.jsx)(o.Ay,{selected:Z,onChange:Y,dateFormat:"yyyy-MM-dd",placeholderText:"Select due date"})]}),(0,a.jsxs)("div",{className:"form-actions",children:[(0,a.jsx)("button",{type:"submit",className:"save-btn",children:"Save Changes"}),(0,a.jsx)("button",{type:"button",onClick:()=>P(null),className:"cancel-btn",children:"Cancel"})]})]})}),(0,a.jsxs)("div",{className:"task-sections",children:[(0,a.jsxs)("div",{className:"section",children:[(0,a.jsx)("h4",{children:"Subtasks"}),(0,a.jsx)("div",{className:"subtasks-list",children:O.map(e=>(0,a.jsxs)("div",{className:"subtask-item",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.completed,onChange:async s=>{await fetch("/api/subtasks",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({subtask_id:e.subtask_id,completed:s.target.checked})});let t=await fetch("/api/subtasks?task_id=".concat(_.task_id));H(await t.json())}}),(0,a.jsx)("span",{className:e.completed?"completed":"",children:e.title})]},e.subtask_id))}),(0,a.jsx)("form",{onSubmit:async e=>{e.preventDefault();let s=new FormData(e.target);await fetch("/api/subtasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task_id:_.task_id,title:s.get("subtask")})}),e.target.reset();let t=await fetch("/api/subtasks?task_id=".concat(_.task_id));H(await t.json())},children:(0,a.jsxs)("div",{className:"add-item",children:[(0,a.jsx)("input",{name:"subtask",placeholder:"Add a subtask...",required:!0}),(0,a.jsx)("button",{type:"submit",children:"+"})]})})]}),(0,a.jsxs)("div",{className:"section",children:[(0,a.jsx)("h4",{children:"Comments"}),(0,a.jsx)("div",{className:"comments-list",children:W.map(e=>(0,a.jsxs)("div",{className:"comment-item",children:[(0,a.jsx)("p",{children:e.content}),(0,a.jsx)("small",{children:new Date(e.created_at).toLocaleString()})]},e.comment_id))}),(0,a.jsx)("form",{onSubmit:async e=>{e.preventDefault();let s=new FormData(e.target);await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task_id:_.task_id,content:s.get("comment")})}),e.target.reset();let t=await fetch("/api/comments?task_id=".concat(_.task_id));F(await t.json())},children:(0,a.jsxs)("div",{className:"add-item",children:[(0,a.jsx)("textarea",{name:"comment",placeholder:"Add a comment...",required:!0,rows:"2"}),(0,a.jsx)("button",{type:"submit",children:"Comment"})]})})]})]})]})]})}),S&&(0,a.jsx)("div",{className:"modal-overlay",children:(0,a.jsxs)("div",{className:"chapter-modal glass-card",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsxs)("h2",{children:["Chapter: ",S.chapter_name]}),(0,a.jsx)("button",{className:"close-btn",onClick:()=>C(null),children:"\xd7"})]}),(0,a.jsxs)("div",{className:"modal-body",children:[(0,a.jsx)("div",{className:"topics-scrollable-container",children:(0,a.jsxs)("div",{className:"topics-section",children:[(0,a.jsx)("h3",{children:"Topics in this Chapter"}),(0,a.jsx)("div",{className:"topics-list",children:S.studyPlans.map(e=>(0,a.jsxs)("div",{className:"topic-item-detailed",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",padding:"10px",borderRadius:"6px",backgroundColor:"rgba(255, 255, 255, 0.4)",border:"1px solid rgba(0, 0, 0, 0.05)",alignItems:"start"},children:[(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,a.jsx)("h4",{style:{margin:"0",fontSize:"13px",fontWeight:"600",color:"#1f2937",textDecoration:"Done"===e.learning_status?"line-through":"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.topic}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px",fontSize:"11px",color:"#6b7280"},children:[(0,a.jsxs)("span",{children:["ID: ",e.topic_id]}),(0,a.jsx)("span",{style:{backgroundColor:"".concat(eV(e.learning_status),"20"),color:eV(e.learning_status),padding:"1px 4px",borderRadius:"3px",fontWeight:"500",fontSize:"10px"},children:e.learning_status})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px"},children:[(0,a.jsx)("div",{style:{flex:1,height:"5px",backgroundColor:"#e5e7eb",borderRadius:"2px",overflow:"hidden"},children:(0,a.jsx)("div",{style:{height:"100%",width:"".concat(e.progress_percentage,"%"),backgroundColor:100===e.progress_percentage?"#10b981":e.progress_percentage>0?"#f59e0b":"#6b7280"}})}),(0,a.jsxs)("span",{style:{fontWeight:"600",color:"#374151",minWidth:"28px",textAlign:"right"},children:[e.progress_percentage,"%"]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,a.jsx)("button",{onClick:()=>{let s=Math.min(e.progress_percentage+10,100);ei(t=>{let a=t.map(t=>t.unique_id===e.unique_id?{...t,progress_percentage:s}:t);localStorage.setItem("study-plans-data",JSON.stringify(a));let n=M(a.filter(e=>e.subject===(null==f?void 0:f.name))).find(e=>e.chapter_id===S.chapter_id);return n&&C(n),a})},style:{padding:"4px 8px",fontSize:"12px",borderRadius:"4px",border:"none",backgroundColor:"#f3f4f6",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="#e5e7eb",onMouseLeave:e=>e.target.style.backgroundColor="#f3f4f6",children:"+10%"}),(0,a.jsx)("button",{onClick:()=>{ei(s=>{let t=s.map(s=>s.unique_id===e.unique_id?{...s,learning_status:"Done",progress_percentage:100}:s);localStorage.setItem("study-plans-data",JSON.stringify(t));let a=M(t.filter(e=>e.subject===(null==f?void 0:f.name))).find(e=>e.chapter_id===S.chapter_id);return a&&C(a),t})},style:{padding:"4px 8px",fontSize:"12px",borderRadius:"4px",border:"none",backgroundColor:"#d1fae5",color:"#065f46",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="#a7f3d0",onMouseLeave:e=>e.target.style.backgroundColor="#d1fae5",children:"Done"})]})]},e.unique_id))})]})}),(0,a.jsxs)("div",{className:"modal-bottom-sections",children:[(0,a.jsx)("h3",{children:"Notes"}),(0,a.jsx)("textarea",{placeholder:"Add notes for this chapter...",rows:"6",className:"notes-textarea",value:S.notes||"",onChange:e=>{C({...S,notes:e.target.value})}})]}),(0,a.jsxs)("div",{className:"voice-section",children:[(0,a.jsx)("h3",{children:"Voice Recording"}),(0,a.jsxs)("div",{className:"voice-controls",children:[(0,a.jsx)("button",{className:"voice-btn",title:"Start Recording",children:(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"})]})}),(0,a.jsx)("button",{className:"voice-btn",title:"Stop Recording",children:(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("rect",{x:"6",y:"6",width:"12",height:"12",stroke:"currentColor",strokeWidth:"2"})})}),(0,a.jsx)("button",{className:"voice-btn",title:"Play Recording",children:(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("polygon",{points:"8,5 19,12 8,19",stroke:"currentColor",strokeWidth:"2",fill:"currentColor"})})})]})]})]})]})}),I&&(0,a.jsx)("div",{className:"modal",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsx)("h3",{children:"Add New Task"}),(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault();let s=new FormData(e.target),t=eG.find(e=>e.id===I),a=[...en,{unique_id:"TASK-".concat(Date.now()),curriculum:(null==f?void 0:f.name)||"JEE",grade:12,subject:(null==f?void 0:f.name)||"General",chapter_id:"CH-".concat(Date.now()),chapter_name:"New Chapter",topic_id:"T-".concat(Date.now()),topic:s.get("title"),target_date:null,learning_status:t.status,learning_stage:"Initiated",learning_proficiency:"Novice",progress_percentage:0,notes:s.get("description")}];ei(a),localStorage.setItem("study-plans-data",JSON.stringify(a)),A(null),fetchPlans()},children:[(0,a.jsx)("input",{name:"title",placeholder:"Task title",required:!0}),(0,a.jsx)("textarea",{name:"description",placeholder:"Description"}),(0,a.jsxs)("select",{name:"priority",children:[(0,a.jsx)("option",{children:"Low"}),(0,a.jsx)("option",{children:"Medium"}),(0,a.jsx)("option",{children:"High"}),(0,a.jsx)("option",{children:"Important"})]}),(0,a.jsx)("button",{type:"submit",children:"Add Task"}),(0,a.jsx)("button",{type:"button",onClick:()=>A(null),children:"Cancel"})]})]})})]}),el&&(0,a.jsx)("div",{className:"weather-overlay",children:Array.from({length:50},(e,s)=>(0,a.jsx)("div",{className:"raindrop",style:{left:"".concat(100*Math.random(),"%"),animationDelay:"".concat(2*Math.random(),"s"),animationDuration:"".concat(1+Math.random(),"s")}},s))}),"none"!==ed&&(0,a.jsxs)("audio",{ref:e=>{e&&(e.volume=em,ep?e.play().catch(s=>{console.log("Audio play failed:",s);let t=()=>{e.play().catch(()=>{}),document.removeEventListener("click",t)};document.addEventListener("click",t)}):e.pause())},loop:!0,autoPlay:!0,preload:"auto",children:[(0,a.jsx)("source",{src:"zen-mixed"===ed?"https://www.soundjay.com/misc/sounds/ambient-nature.wav":"zen-forest"===ed?"https://www.soundjay.com/misc/sounds/forest-sounds.wav":"zen-rain"===ed?"https://www.soundjay.com/misc/sounds/rain-03.wav":"zen-wind"===ed?"https://www.soundjay.com/misc/sounds/wind.wav":"zen-birds"===ed?"https://www.soundjay.com/misc/sounds/birds-01.wav":"zen-water"===ed?"https://www.soundjay.com/misc/sounds/water-stream.wav":"meditation"===ed?"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav":"flute"===ed?"https://www.soundjay.com/misc/sounds/flute.wav":"https://www.soundjay.com/misc/sounds/nature-sounds.wav",type:"audio/wav"}),(0,a.jsx)("source",{src:"zen-mixed"===ed?"https://www.soundjay.com/misc/sounds/ambient-nature.mp3":"zen-forest"===ed?"https://www.soundjay.com/misc/sounds/forest-sounds.mp3":"zen-rain"===ed?"https://www.soundjay.com/misc/sounds/rain-03.mp3":"zen-wind"===ed?"https://www.soundjay.com/misc/sounds/wind.mp3":"zen-birds"===ed?"https://www.soundjay.com/misc/sounds/birds-01.mp3":"zen-water"===ed?"https://www.soundjay.com/misc/sounds/water-stream.mp3":"meditation"===ed?"https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3":"flute"===ed?"https://www.soundjay.com/misc/sounds/flute.mp3":"https://www.soundjay.com/misc/sounds/nature-sounds.mp3",type:"audio/mpeg"}),"Your browser does not support the audio element."]},ed),eb&&(0,a.jsx)("div",{className:"modal-overlay",children:(0,a.jsxs)("div",{className:"study-plan-modal glass-card",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsxs)("div",{className:"modal-title-section",children:[(0,a.jsx)("h2",{children:eb.topic}),(0,a.jsxs)("div",{className:"study-plan-details-popup",children:[(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("span",{className:"detail-label",children:"Chapter:"}),(0,a.jsx)("span",{className:"detail-value",children:eb.chapter_name})]}),(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("span",{className:"detail-label",children:"Subject:"}),(0,a.jsx)("span",{className:"detail-value",children:eb.subject})]}),(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("span",{className:"detail-label",children:"Grade:"}),(0,a.jsx)("span",{className:"detail-value",children:eb.grade})]}),(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsx)("span",{className:"detail-label",children:"Curriculum:"}),(0,a.jsx)("span",{className:"detail-value",children:eb.curriculum})]})]}),(0,a.jsx)("span",{className:"modal-status-badge",style:{backgroundColor:"".concat(eV(eb.learning_status),"20"),color:eV(eb.learning_status),borderColor:eV(eb.learning_status)},children:eb.learning_status})]}),(0,a.jsx)("button",{className:"close-btn",onClick:()=>ev(null),children:"\xd7"})]}),(0,a.jsx)("div",{className:"modal-body",children:(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault();let s=new FormData(e.target);for(let e of eN)await fetch("/api/subtopics/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e.completed?"Completed":"Not Started"})});let t=eN.filter(e=>e.completed).length,a=eN.length,n=a>0?Math.round(t/a*100):0;await fetch("/api/study-plan/".concat(eb.unique_id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({progress_percentage:n,notes:s.get("notes")})}),ev(null),ew([]),eS(""),e_([]),fetchStudyPlans()},children:[(0,a.jsxs)("div",{className:"form-group primary-section",children:[(0,a.jsx)("label",{className:"form-label-icon",children:"� Chapter Sub-Topics"}),(0,a.jsxs)("div",{className:"progress-tracker",children:[(0,a.jsxs)("div",{className:"progress-header",children:[(0,a.jsx)("span",{className:"progress-title",children:"Overall Progress"}),(0,a.jsxs)("span",{className:"progress-percentage",children:[eN.length>0?Math.round(eN.filter(e=>e.completed).length/eN.length*100):0,"%"]})]}),(0,a.jsx)("div",{className:"progress-bar-container",children:(0,a.jsx)("div",{className:"progress-bar-fill",style:{width:"".concat(eN.length>0?Math.round(eN.filter(e=>e.completed).length/eN.length*100):0,"%")}})}),(0,a.jsxs)("div",{className:"progress-stats",children:[eN.filter(e=>e.completed).length," of ",eN.length," topics completed"]})]}),(0,a.jsxs)("div",{className:"subtopics-modern",children:[eN.map((e,s)=>(0,a.jsxs)("div",{className:"subtopic-item ".concat(e.completed?"completed":"pending"),children:[(0,a.jsxs)("div",{className:"subtopic-content",children:[(0,a.jsx)("div",{className:"subtopic-icon",children:e.completed?"✓":"○"}),(0,a.jsx)("span",{className:"subtopic-text",children:e.text})]}),(0,a.jsxs)("div",{className:"subtopic-actions",children:[(0,a.jsx)("button",{type:"button",className:"status-btn ".concat(e.completed?"completed":"pending"),onClick:()=>{let e=[...eN];e[s].completed=!e[s].completed,ew(e)},children:e.completed?"Mark Incomplete":"Mark Complete"}),(0,a.jsx)("button",{type:"button",className:"remove-subtopic-btn",onClick:()=>{ew(eN.filter((e,t)=>t!==s))},children:"\xd7"})]})]},e.id)),(0,a.jsxs)("div",{className:"add-subtopic-modern",children:[(0,a.jsx)("input",{type:"text",value:ek,onChange:e=>eS(e.target.value),placeholder:"Add new learning topic...",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),ek.trim()&&(ew([...eN,{id:Date.now(),text:ek.trim(),completed:!1}]),eS("")))}}),(0,a.jsx)("button",{type:"button",className:"add-subtopic-btn-modern",onClick:()=>{ek.trim()&&(ew([...eN,{id:Date.now(),text:ek.trim(),completed:!1}]),eS(""))},children:"+ Add Topic"})]})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label-icon",children:"\uD83D\uDCDD Notes"}),(0,a.jsx)("textarea",{name:"notes",defaultValue:eb.notes,rows:"4",placeholder:"Add your study notes, insights, or reminders here..."})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label-icon",children:"�️ Voice Notes"}),(0,a.jsxs)("div",{className:"voice-logging",children:[(0,a.jsx)("div",{className:"voice-controls",children:eD?(0,a.jsx)("button",{type:"button",className:"record-btn stop",onClick:()=>{eP&&eD&&(eP.stop(),eT(!1),eL(null))},children:"⏹️ Stop Recording"}):(0,a.jsx)("button",{type:"button",className:"record-btn recording",onClick:e0,children:"�️ Start Recording"})}),(0,a.jsx)("div",{className:"voice-recordings",children:0===eC.length?(0,a.jsx)("p",{children:"No voice recordings yet"}):eC.map(e=>(0,a.jsxs)("div",{className:"voice-recording-item",children:[(0,a.jsxs)("span",{children:["Recording ",new Date(e.timestamp).toLocaleTimeString()]}),(0,a.jsxs)("div",{className:"recording-controls",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{new Audio(e.url).play()},children:"▶️"}),(0,a.jsx)("button",{type:"button",onClick:()=>{var s;return s=e.id,void e_(eC.filter(e=>e.id!==s))},children:"\uD83D\uDDD1️"})]})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label-icon",children:"\uD83D\uDCCA Overall Status & Date"}),(0,a.jsxs)("div",{className:"status-date-section",children:[(0,a.jsxs)("div",{className:"status-info",children:[(0,a.jsx)("span",{className:"status-label",children:"Current Status:"}),(0,a.jsx)("span",{className:"status-value",children:eb.learning_status})]}),(0,a.jsxs)("div",{className:"date-info",children:[(0,a.jsx)("span",{className:"date-label",children:"Target Date:"}),(0,a.jsx)("span",{className:"date-value",children:eb.target_date?new Date(eb.target_date).toLocaleDateString():"Not set"})]})]})]}),(0,a.jsxs)("div",{className:"form-actions",children:[(0,a.jsx)("button",{type:"submit",className:"save-btn",children:"\uD83D\uDCBE Save Progress"}),(0,a.jsx)("button",{type:"button",onClick:()=>{ev(null),ew([]),eS(""),e_([])},className:"cancel-btn",children:"❌ Close"})]})]})})]})}),ec&&(0,a.jsx)("div",{className:"modal-overlay",children:(0,a.jsxs)("div",{className:"settings-modal glass-card",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("h2",{children:"Settings"}),(0,a.jsx)("button",{className:"close-btn",onClick:()=>eo(!1),children:"\xd7"})]}),(0,a.jsxs)("div",{className:"modal-body",children:[(0,a.jsxs)("div",{className:"settings-section",children:[(0,a.jsx)("h3",{children:"Background Theme"}),(0,a.jsxs)("div",{className:"setting-item",children:[(0,a.jsx)(m,{}),(0,a.jsxs)("select",{value:X,onChange:e=>$(e.target.value),children:[(0,a.jsx)("option",{value:"forest-mountain",children:"Forest Mountain"}),(0,a.jsx)("option",{value:"green-forest",children:"Green Forest"}),(0,a.jsx)("option",{value:"bamboo",children:"Bamboo Grove"}),(0,a.jsx)("option",{value:"jungle",children:"Tropical Jungle"}),(0,a.jsx)("option",{value:"meadow",children:"Spring Meadow"}),(0,a.jsx)("option",{value:"gradient",children:"Ocean Gradient"}),(0,a.jsx)("option",{value:"nature",children:"Wild Nature"}),(0,a.jsx)("option",{value:"flowers",children:"Flower Garden"}),(0,a.jsx)("option",{value:"animals",children:"Safari Animals"}),(0,a.jsx)("option",{value:"mountains",children:"Snow Mountains"}),(0,a.jsx)("option",{value:"ocean",children:"Deep Ocean"}),(0,a.jsx)("option",{value:"desert",children:"Golden Desert"}),(0,a.jsx)("option",{value:"sunset",children:"Tropical Sunset"}),(0,a.jsx)("option",{value:"aurora",children:"Northern Aurora"}),(0,a.jsx)("option",{value:"galaxy",children:"Starry Galaxy"}),(0,a.jsx)("option",{value:"sakura",children:"Cherry Blossom"}),(0,a.jsx)("option",{value:"autumn",children:"Autumn Leaves"}),(0,a.jsx)("option",{value:"winter",children:"Winter Wonderland"}),(0,a.jsx)("option",{value:"rainbow",children:"Rainbow Sky"}),(0,a.jsx)("option",{value:"zen-garden",children:"Zen Garden"}),(0,a.jsx)("option",{value:"crystal",children:"Crystal Cave"}),(0,a.jsx)("option",{value:"lava",children:"Volcanic Lava"}),(0,a.jsx)("option",{value:"ice",children:"Arctic Ice"}),(0,a.jsx)("option",{value:"cosmic",children:"Cosmic Nebula"}),(0,a.jsx)("option",{value:"ethereal",children:"Ethereal Mist"})]})]})]}),(0,a.jsxs)("div",{className:"settings-section",children:[(0,a.jsx)("h3",{children:"Navigation Bar Background"}),(0,a.jsxs)("div",{className:"setting-item",children:[(0,a.jsx)(m,{}),(0,a.jsxs)("select",{value:ee||"default",onChange:e=>es(e.target.value),children:[(0,a.jsx)("option",{value:"default",children:"Default (Semi-transparent)"}),(0,a.jsx)("option",{value:"glass",children:"Glass Effect"}),(0,a.jsx)("option",{value:"solid",children:"Solid White"}),(0,a.jsx)("option",{value:"gradient",children:"Gradient"}),(0,a.jsx)("option",{value:"blur",children:"Heavy Blur"}),(0,a.jsx)("option",{value:"minimal",children:"Minimal"})]})]})]}),(0,a.jsxs)("div",{className:"settings-section",children:[(0,a.jsx)("h3",{children:"Weather Effects"}),(0,a.jsxs)("div",{className:"setting-item",children:[(0,a.jsx)(p,{}),(0,a.jsxs)("button",{className:"nav-btn ".concat(el?"active":""),onClick:()=>er(!el),children:[el?"Disable":"Enable"," Weather Effects"]})]})]}),(0,a.jsxs)("div",{className:"settings-section",children:[(0,a.jsx)("h3",{children:"Background Music"}),(0,a.jsxs)("div",{className:"setting-item",children:[(0,a.jsx)(g,{}),(0,a.jsxs)("select",{value:ed,onChange:e=>eu(e.target.value),children:[(0,a.jsx)("option",{value:"zen-mixed",children:"Zen Mixed (Waves + Campfire + Rain + Crickets)"}),(0,a.jsx)("option",{value:"zen-forest",children:"Zen Forest"}),(0,a.jsx)("option",{value:"zen-rain",children:"Zen Rain"}),(0,a.jsx)("option",{value:"zen-wind",children:"Zen Wind"}),(0,a.jsx)("option",{value:"zen-birds",children:"Zen Birds"}),(0,a.jsx)("option",{value:"zen-water",children:"Zen Water"}),(0,a.jsx)("option",{value:"meditation",children:"Meditation"}),(0,a.jsx)("option",{value:"flute",children:"Flute"}),(0,a.jsx)("option",{value:"nature",children:"Nature"}),(0,a.jsx)("option",{value:"none",children:"None"})]})]}),(0,a.jsx)("div",{className:"setting-item",children:(0,a.jsxs)("button",{className:"nav-btn ".concat(ep?"active":""),onClick:()=>ex(!ep),children:[ep?"Pause":"Play"," Music"]})})]}),(0,a.jsxs)("div",{className:"settings-section",children:[(0,a.jsx)("h3",{children:"Filters"}),(0,a.jsx)("div",{className:"setting-item",children:(0,a.jsx)("input",{type:"text",placeholder:"Search tasks...",value:K,onChange:e=>J(e.target.value),className:"search-input"})}),(0,a.jsx)("div",{className:"setting-item",children:(0,a.jsxs)("select",{value:V,onChange:e=>Q(e.target.value),children:[(0,a.jsx)("option",{value:"All",children:"All Priorities"}),(0,a.jsx)("option",{value:"Low",children:"Low"}),(0,a.jsx)("option",{value:"Medium",children:"Medium"}),(0,a.jsx)("option",{value:"High",children:"High"}),(0,a.jsx)("option",{value:"Important",children:"Important"})]})}),(0,a.jsx)("div",{className:"setting-item",children:(0,a.jsxs)("select",{value:U,onChange:e=>G(e.target.value),children:[(0,a.jsx)("option",{value:"All",children:"All Labels"}),(0,a.jsx)("option",{value:"Math",children:"Math"}),(0,a.jsx)("option",{value:"Physics",children:"Physics"}),(0,a.jsx)("option",{value:"Chemistry",children:"Chemistry"}),(0,a.jsx)("option",{value:"High Priority",children:"High Priority"})]})})]}),(0,a.jsxs)("div",{className:"settings-section",children:[(0,a.jsx)("h3",{children:"Data Management"}),(0,a.jsxs)("div",{className:"setting-item",children:[(0,a.jsx)("button",{className:"nav-btn delete-all-btn",onClick:eY,style:{backgroundColor:"#ef4444",color:"white",border:"none"},title:"Delete all study plan cards from the Kanban board",children:"\uD83D\uDDD1️ Delete All Cards"}),(0,a.jsx)("span",{style:{fontSize:"12px",color:"#666",marginLeft:"10px"},children:"Permanently delete all study plan cards"})]})]})]})]})}),(0,a.jsx)("div",{className:"voice-assistant-container",children:(0,a.jsxs)("button",{className:"voice-assistant-btn",onClick:()=>{},title:"Voice Assistant",children:[(0,a.jsx)("div",{className:"voice-assistant-icon",children:"\uD83C\uDF99️"}),(0,a.jsx)("div",{className:"voice-assistant-pulse"})]})})]})}},9891:e=>{"use strict";e.exports={rE:"1.0.3"}}},e=>{e.O(0,[121,701,271,287,636,593,792],()=>e(e.s=2936)),_N_E=e.O()}]);